<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: INSTALL</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>INSTALL</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>doc/INSTALL
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Tue Mar 15 11:03:09 +0000 2011</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>Installation</h1>
<p>
SEEK is based upon the Ruby on Rails platform. Although the information on
this page should provide you with everything you need to get a basic
installation of SEEK up and running, some background reading on Ruby on
Rails would be beneficial if it is new to you. Documentation and resources
describing Ruby on Rails can be found at <a
href="http://rubyonrails.org/documentation">rubyonrails.org/documentation</a>.
Since SEEK uses v2.3.5 of Rails, <a
href="http://guides.rubyonrails.org/v2.3.8">guides.rubyonrails.org/v2.3.8</a>/
and <a
href="http://api.rubyonrails.org/v2.3.8">api.rubyonrails.org/v2.3.8</a> may
be useful as well.
</p>
<p>
We recommend that you run SEEK on a Linux system. All of the examples here
describe installing on an Ubuntu or Debian system, but should be easily
transferrable to other Linux systems such as Fedora.
</p>
<p>
Although possible, installing and running Ruby on Rails on a Windows system
is troublesome and is not covered here.
</p>
<h2>Prerequesites</h2>
<p>
We recommend you use ruby, version 1.8.7.
</p>
<p>
MySQL server needs to be installed installed, along the development package
(required to compile the MySQL rubygem). We use the Ubuntu/Debian packages
<em>mysql-server</em> and <em>libmysqlclient15-dev</em>
</p>
<p>
The ImageMagick libraries need to be installed, as these are required by
the rmagic gem. We use the The Ubuntu/Debian package
<em>libmagick++9-dev</em>
</p>
<p>
You will need a minimal build environment, as some of the ruby gems require
compilation. The Ubuntu/Debian package <em>build-essentials</em> should be
sufficient
</p>
<p>
SEEK uses Lucene as its search engine, and this requires that java is
installed. We use the Sun Java 1.6 package <em>sun-java6-jdk</em>
</p>
<p>
<b>Note:</b>If using Ubuntu, you will need to enable Partner sources to
install sun-java6-jdk (if you are unsure of how to do this, see <a
href="https://help.ubuntu.com/community/Repositories/Ubuntu#Adding+Canonical+Partner+Repositories">help.ubuntu.com/community/Repositories/Ubuntu#Adding+Canonical+Partner+Repositories</a>).
</p>
<p>
If using Ubuntu or Debian, the following commands should install most the
packages you need:
</p>
<pre>
  sudo apt-get install wget mercurial ruby rdoc ri libopenssl-ruby ruby-dev mysql-server libssl-dev build-essential openssh-server
  sudo apt-get install libmysqlclient16-dev libmagick++-dev libxml++2.6-dev sun-java6-jdk graphviz libsqlite3-dev sqlite3
</pre>
<p>
if you are intending to develop SEEK you will probably also want to use:
</p>
<pre>
  sudo apt-get install curl irb
</pre>
<p>
if setting up for production deployment using the Passenger Phusion Apache
module you can save a step later by also using:
</p>
<pre>
  sudo apt-get install apache2-mpm-prefork apache2-prefork-dev libapr1-dev libaprutil1-dev libcurl4-openssl-dev
</pre>
<p>
You now need to install rubygems (1.3.7). Rather than install through
apt-get, we recommend downloading and installing from the rubygems website:
<a
href="http://rubygems.org/pages/download">rubygems.org/pages/download</a>.
The following commands should install rubygems for you on a Ubuntu/Debian
system.
</p>
<pre>
  cd /tmp
  wget http://production.cf.rubygems.org/rubygems/rubygems-1.3.7.tgz
  tar zfxv rubygems-1.3.7.tgz
  cd rubygems-1.3.7/
  sudo ruby ./setup.rb
  cd /usr/bin/
  sudo ln -s gem1.8 gem
  cd -
</pre>
<h2>Getting the source code</h2>
<p>
Our source code is stored within the <a
href="http://code.google.com/p/sysmo-db/">Sysmo-DB Google Code
Repository</a>, using <a href="http://mercurial.selenic.com/">Mercurial</a>
as the version control system.
</p>
<p>
For a stable version, you should check out according to a stable tag. Our
current tag is v0.10.4, so to retrieve this version you should use:
</p>
<pre>
  hg clone https://sysmo-db.googlecode.com/hg/ -r v0.10.4 sysmo-seek
</pre>
<p>
<a href="http://gembundler.com/">Bundler</a> is used to manage gems, so to
install the required gems you first need to install the bundler gem:
</p>
<pre>
  sudo gem install -d bundler rake
</pre>
<p>
Then from within the sysmo-seek directory run
</p>
<pre>
  bundle install
</pre>
<p>
If you are requested for a root or sudo password, but you do not have this
level of access then you should use
</p>
<pre>
  bundle install --deployment
</pre>
<h2>The RAILS_ENV environment variable</h2>
<p>
If you are setting up SEEK as a production environment, rather than for
development, you should set the RAILS_ENV variable before proceeding
</p>
<pre>
  export RAILS_ENV=production
</pre>
<h2>Rebranding SysMO SEEK for other projects</h2>
<p>
If you are running SEEK for a project other than SysMO, copy
config/initializers/seek_local.rb.pre to config/initializers/seek_local.rb.
This file contains several constants that you should set, to reflect the
name of your project/application.
</p>
<p>
To insert your application/project name into the help documents for SEEK,
and to remove the logos/links to SEEK&#8216;s &#8216;related projects and
friends&#8217; use
</p>
<p>
rake seek:rebrand
</p>
<p>
If you only want to change the help documents, you can instead use
</p>
<p>
rake seek:rebrand_help_docs
</p>
<h2>Configuring the database</h2>
<p>
Copy config/database.default.yml to config/database.yml and edit
accordingly - either MySQL or SQLite3 should work (you will need to install
the <em>sqlite3-dev</em> package and the <em>sqlite3-ruby</em> gem)
</p>
<p>
To add users to the MySQL database, first login to the database as an
administrator (root by default) and issue a GRANT command along the lines
of the example below (for clarity, this uses a username of
<em>mysqluser</em> and password <em>mysqlpassword</em>. <b>You are
obviously recommended to use a different username and password</b> on a
server exposed to the internet).
</p>
<pre>
    &gt; mysql -uroot -p
    Enter password:
    Welcome to the MySQL monitor.  Commands end with ; or \g.
    Your MySQL connection id is 1522
    Server version: 5.1.37-1ubuntu5.1 (Ubuntu)

    Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

    mysql&gt; CREATE USER 'mysqluser'@'localhost' IDENTIFIED BY 'mysqlpassword';
    mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'mysqluser'@'localhost' WITH GRANT OPTION;
</pre>
<p>
Run the rake tasks (the final task installs some default controlled
vocubulary data)
</p>
<pre>
  rake db:create:all
  rake db:schema:load
  rake seek:seed
</pre>
<h2>A quick test</h2>
<p>
You can quickly check that everything is in order by running the system
tests as follows
</p>
<pre>
  rake db:test:prepare
  rake test
</pre>
<h2>Starting the server</h2>
<p>
You can now start the server with the command
</p>
<pre>
  ./script/server
</pre>
<p>
If running in production mode, you should start the server with
</p>
<pre>
  ./script/server -e production
</pre>
<h2>Creating the Admin user</h2>
<p>
Once the server is running you should visit the page <a
href="http://localhost:3000">localhost:3000</a>
</p>
<p>
If there are no users present in the system (and there should not be at
this stage) you will be requested to provide login details, and some basic
information about your profile (you can always come back and modify the
profile information and your password. You cannot modify your login name).
</p>
<p>
Once created this user will become the admin user of the system.
</p>
<h2>Administering the system</h2>
<p>
Once logged in as an administrator, you will notice a link on the
right-hand side of the tabs/search bar &quot;Admin Enabled&quot;. Selecting
this will provide you with some admin facilities for creating new projects,
institutions and profiles.
</p>
<p>
Here you can also define additional administrator users.
</p>
<h2>Contacting us and other developers</h2>
<p>
There is a public Google Group available for SEEK development at <a
href="http://groups.google.com/group/seek-development">groups.google.com/group/seek-development</a>
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>