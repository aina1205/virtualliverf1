= Installation

SysMO-SEEK is based upon the Ruby on Rails platform. Although the information on this page should provide you with everything you need to get a basic installation of
SysMO-SEEK up and running, some background reading on Ruby on Rails would be beneficial if it is new to you. Documentation and resources describing Ruby on Rails can be found
at http://rubyonrails.org/documentation and there are some good guides at http://guides.rubyonrails.org/.

We recommend that you run SysMO-SEEK on a Linux system. All of the examples here describe installing on an Ubuntu or Debian system, but should be easily transferrable to other Linux systems such as Fedora.

Although possible, installing and running Ruby on Rails on a Windows system is troublesome and is not covered here.

== Prerequesites

We recommend you use ruby, version 1.8.7.

MySQL server needs to be installed installed, along the development package (required to compile the MySQL rubygem). We use the Ubuntu/Debian packages <em>mysql-server</em> and <em>libmysqlclient15-dev</em>

The ImageMagick libraries need to be installed, as these are required by the rmagic gem. We use the The Ubuntu/Debian package <em>libmagick++9-dev</em>

You will need a minimal build environment, as some of the ruby gems require compilation. The Ubuntu/Debian package <em>build-essentials</em> should be sufficient

SysMO-SEEK uses Lucene as its search engine, and this requires that java is installed. We use the Sun Java 1.6 package <em>sun-java6-jdk</em>

If using Ubuntu or Debian, the following commands should install all the packages you need:

  sudo apt-get install mercurial ruby rdoc ri irb libopenssl-ruby ruby-dev mysql-server libssl-dev libmysqlclient15-dev libmagick++9-dev build-essential curl openssh-server libxml++2.6-dev sun-java6-jdk

For Ubuntu 10.04 (Lucid Lynx) you should use:

  sudo apt-get install mercurial ruby rdoc ri irb libopenssl-ruby ruby-dev mysql-server libssl-dev libmysqlclient16-dev libmagick++-dev build-essential curl openssh-server libxml++2.6-dev

You now need to install rubygems (1.3.6). Rather than install through apt-get, we recommend downloading and installing from the rubygems website: http://rubygems.org/pages/download.
The following commands should install rubygems for you on a Ubuntu/Debian system.

  cd /tmp
  wget http://production.cf.rubygems.org/rubygems/rubygems-1.3.6.tgz
  tar zfxv rubygems-1.3.6.tgz
  cd rubygems-1.3.6/
  sudo ruby ./setup.rb
  cd /usr/bin/
  sudo ln -s gem1.8 gem
  cd -

If using Ubuntu or Debian, the following commands should install all the gems you need:

  sudo gem install rails mysql libxml-ruby rmagick spreadsheet hpricot uuidtools fastercsv RedCloth mongrel

== Getting the source code

Our source code is stored within the {Sysmo-DB Google Code Repository}[http://code.google.com/p/sysmo-db/], using Mercurial[http://mercurial.selenic.com/] as the version control system. For a stable version, you should check out according to a stable tag. Our current tag is v0.7.2, so to retrieve this version you should use:

  hg clone https://sysmo-db.googlecode.com/hg/ -r v0.7.2 sysmo-seek


== The RAILS_ENV environment variable

If you are setting up SysMO-SEEK as a production environment, rather than for development, you should set the RAILS_ENV variable before proceeding

  export RAILS_ENV=production

== Configuring the database

Copy config/database.default.yml to config/database.yml and edit accordingly - either MySQL or SQLite3 should work (you will need to install the <em>sqlite3-dev</em> package and the <em>sqlite3-ruby</em> gem)

To add users to the MySQL database, first login to the database as an administrator (root by default) and issue a GRANT command along the lines of the example below (for clarity, this uses a username of <em>mysqluser</em> and password <em>mysqlpassword</em>. You are obviously recommended to use something different).

    > mysql -uroot -p
    Enter password:
    Welcome to the MySQL monitor.  Commands end with ; or \g.
    Your MySQL connection id is 1522
    Server version: 5.1.37-1ubuntu5.1 (Ubuntu)

    Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

    mysql> GRANT ALL on *.* TO 'mysqluser'@'localhost' IDENTIFIED BY 'mysqluser'


Run the rake tasks (the final task installs some default controlled vocubulary data)

  rake db:create:all
  rake db:schema:load
  rake seek:seed

== A quick test

You can quickly check that everything is in order by running the system tests as follows

  rake db:test:prepare
  rake test

== Starting the server

You can now start the server with the command

  ./script/server

If running in production mode, you should start the server with

  ./script/server -e production

== Creating the Admin user

Once the server is running you should visit the page http://localhost:3000

If there are no users present in the system (and there should not be at this stage) you will be requested to provide login details, and some basic information about your profile
(you can always come back and modify the profile information and your password. You cannot modify your login name).

Once created this user will become the admin user of the system.

== Administering the system

Once logged in as an administrator, you will notice a link on the right-hand side of the tabs/search bar "Admin Enabled". Selecting this will provide you with some
admin facilities for creating new projects, institutions and profiles.

Here you can also define additional adminstrator users.

== Enabling search

By default search is disabled. To override this (and other settings) copy the file <em>config/initializers/seek_local.rb.pre</em> to <em>config/initializers/seek_local.rb</em>

  cp config/initializers/seek_local.rb.pre config/initializers/seek_local.rb

You should then edit that file, and change the setting SOLR_ENABLED to true. You will need to restart your server for this to take effect.

You also need to start up the background search service. This is started with the command

  rake solr:start

You should reindex the search database, and can do this at anytime, using the commmand

  rake solr:reindex

== Contacting us and other users

There is a public Google Group available for Sysmo-SEEK at http://groups.google.com/group/sysmo-seek


