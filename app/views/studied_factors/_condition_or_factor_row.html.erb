<% javascript_include_tag "sharing.js" -%>

<%
   show_delete||=false
   asset ||= nil
   object = condition_or_factor_row
   asset_object = object.send asset
%>
<li id="condition_or_factor_row_<%= object.id -%>" >
  <ul class="condition_or_factor_row">
    <% if asset == 'data_file' %>
      <li id="time_point">
        <%= h object.time_point %>
      </li>
    <% end %>

    <li id="measured_item">
      <%if  object.measured_item.title == 'concentration' and object.substance.try(:name)%>
        <%= h object.substance.name + ' ' + object.measured_item.title  %>
      <%else%>
        <%= h object.measured_item.title %>
      <%end%>
    </li>
    
    <li id="values">
      <!--don't show dimensionless unit-->
      <% if object.unit.symbol == 'dimensionless' %>
          <%= "#{h object.range_text}" %>
      <% else %>
        <%= "#{h object.range_text} #{object.unit.symbol}" %>
      <% end %>
    </li>       
    <% if asset == 'data_file' %>
      <li id="standard_deviation">
        <%= h object.standard_deviation %>
      </li>
    <% end %>
    <% if show_delete %>
        <li id="delete" class="destroy_condition_or_factor">
           <%=  link_to_remote image("destroy",:alt=>"Delete",:title=>"Delete this entry"),
             :url => { :action => "destroy", :id => object.id, "#{asset}_id"=>asset_object.id},
             :confirm=>"Are you sure?",:method=>:delete
           -%>
        </li>

        <li id="edit_on_<%= object.id -%>" >
          <%= link_to_function image(("edit"),:title=>"Start editing",:alt=>"Start editing") do |page|
             page.visual_effect :appear, "edit_condition_or_factor_#{object.id}_form"
             page["edit_on_#{object.id}"].toggle
             page["edit_off_#{object.id}"].toggle

            end
          -%>
        </li>

        <li id="edit_off_<%= object.id -%>" style="display:none">
          <%= link_to_function image(("edit-off"),:title=>"Stop editing",:alt=>"Stop editing") do |page|
             page.visual_effect :fade, "edit_condition_or_factor_#{object.id}_form"
             page["edit_on_#{object.id}"].toggle
             page["edit_off_#{object.id}"].toggle
            end
          -%>
        </li>
    <% end %>
    </ul>
</li>



<% if show_delete %>
    <%= render :partial => "studied_factors/edit_condition_or_factor", :locals => {:asset => asset, :object => object}-%>
<% end %>

