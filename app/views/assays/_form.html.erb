<%= javascript_include_tag "studies.js"  %>

<%= f.error_messages -%>


<center>
  <div style="width: 60%;">

    <% if !@assay.studies.empty? -%>
      <%= f.hidden_field :study_ids -%>
      <p>
        <%= label_tag "Associated studies: " %>
        <% for study in @assay.studies -%>
          <%= h study.title.capitalize -%>
          <%= ", " unless study==@assay.studies.last -%>
        <% end -%>
      </p>
    <% end -%>

    <p>
      <%= f.label :title-%>*<br/>
      <%= f.text_field :title,:size=>52 -%>
    </p>

    <p>
      <%= f.label :description -%><br/>
      <%= f.text_area :description,:cols=>50,:rows=>10 -%>
    </p>
  </div>
</center>


<h2>Assay and technology types</h2>
<p id="assay_types">
  <%= render :partial=>"assays/select_assay_type",:locals=>{:f=>f} %><br/>
  <%= render :partial=>"assays/select_technology_type",:locals=>{:f=>f} %><br/>
</p>

<h2>Assay SOPs</h2>

<%= render :partial=>"assays/sop_selection",:locals=>{:f=>f} -%>


<% if action == :edit -%>
  <h2>Data files</h2>
  <%= render :partial=>"assays/associate_data_file",:locals=>{:f=>f} -%>
<% end -%>

<p style="margin-top: 2em; text-align: center;" >
  <%= f.submit(action==:edit ? "Update" : "Create") -%>
  or <%= link_to 'Cancel', (@assay.id ? assay_path(@assay.id) : assays_path) -%>
</p>
