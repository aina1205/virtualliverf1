<%= javascript_include_tag 'resource'%>
<%
upload_field = controller_name.downcase.singularize.underscore
upload_field = 'content_blob'  if resource.respond_to?(:content_blobs)
%>

<% if logged_in? && current_user.person.member? -%>
<div id="upload_new_version_form" style="display:none">
    <% form_tag({:action=>"new_version", :id=>resource}, :multipart => true) do -%>
        <div style="width:95%;margin-top:0.75em; margin-left: 2em">
           <% locals = resource.respond_to?(:content_blobs) ? {:resource=>resource, :new_version=>true} : {:new_version=>true}  %>
           <%= render :partial=>"assets/upload_box" ,:locals=>locals-%>


            <p>
                <b>Revision comments (optional)</b>
                <br/>
                <%= text_area_tag :revision_comment, nil, :size=>"55x4" -%>
                <br/>
                <%= submit_tag "Upload", :id => "new_version_submit_btn", :onclick => "javascript: validateUploadNewVersion(#{resource.respond_to?(:content_blobs)}, '#{controller_name.singularize}'); return(false);" -%>
            </p>
        </div>
    <% end -%>
</div>
<%end%>
