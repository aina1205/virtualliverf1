<%
  specimen = sample.try(:specimen) || specimen
  culture_growth_options=options_for_select(CultureGrowthType.find(:all,:order=>:title).collect{|cg| [cg.title,cg.id]}.insert(0,"Not specified"),specimen.try(:culture_growth_type_id))
-%>
<% form_tag :controller => 'samples', :action=>"create_specimen_sample" do -%>
<div id="redbox_contents_div" class="redbox_contents" style="width:750px;">
	<div class="head">
		<%= link_to_close_redbox image_tag("close.gif"), :style => "float:right; margin-left:0.5em; vertical-align:middle;" -%>
		<span style="vertical-align:middle;">
			Create new sample
		</span>
	</div>

    <div class="body">
       <div class="yui-g">
    <center>
      <div class="yui-u first" style="width: 45%; margin-left: 1em">
        <h2>Cell culture</h2>
        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Title:</label>
          <%= text_field_tag "specimen[title]", specimen.try(:donor_number), :style => 'float:right' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;">Culture start date:</label>
          <%= calendar_date_select_tag "specimen[born]", specimen.try(:born), :time => "mixed", :style => 'float:right' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Culture growth type:</label>
          <%= select_tag "specimen[culture_growth_type_id]",culture_growth_options, :style => 'float:right;width:13.5em'-%>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Provider ID:</label>
          <%= text_field_tag "specimen[provider_id]", specimen.try(:provider_id), :style => 'float:right' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Provider name:</label>
          <%= text_field_tag "specimen[provider_name]", specimen.try(:provider_name), :style => 'float:right' %>
        </p>

          <% if @specimen.can_manage? %>
    <%= render :partial=>"assets/asset_form_bottom", :locals=> {
            :resource_type => "Specimen",
            :attribution_enable => false,
            :show_publications => false,
            :existing_creators=>existing_creators,
            :other_creators=>specimen.other_creators,
    } -%>
            <%end%>
      </div>
    </center>

    <center>
      <div class="yui-u" style="width: 45%;margin-right: 1em;">
        <h2>Sample</h2>
        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Title:</label>
          <%= text_field_tag "sample[title]", sample.try(:title), :style => 'float:right' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Lab internal identifier:</label>
          <%= text_field_tag "sample[lab_internal_identifier]", sample.try(:lab_internal_number), :style => 'float:right' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Provider:</label>
          <%= text_field_tag "sample[provider_name]", sample.try_block{provider_name}, :style => 'float:right' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;">Sampling date:</label>
          <%= calendar_date_select_tag "sample[born]", sample.try(:sampling_date), :time => "mixed", :style => 'float:right' %>
        </p>
      </div>
    </center>
  </div>
    </div>
      <div align="center" style="margin-bottom: 1em">
        <%= submit_tag('Create', :disable_with=> "Creating ...", :style => "font-weight: bold;")%> Or
        <input type=button value='Cancel' onclick="RedBox.close()">
      </div>
    </div>
    <%= hidden_field_tag 'specimen[id]', specimen.try(:id) %>
    <%= hidden_field_tag 'sample[id]', sample.try(:id) %>
<% end %>
