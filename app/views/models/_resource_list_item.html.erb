<%# this should be set by the caller, this is an extra check -%>
<% resource=resource_list_item %>
<% odd_row ||= false -%>
<% narrow_view ||= false -%>

<table class="list_item">
  <tr class="<%= odd_row ? "odd_row" : "even_row" -%>">
    <td style="width: 100px;">
      <%= favouritable_icon(resource, 60) -%>
    </td>

    <td style="text-align: left;">
      <p class="title">
        <%= link_to(h(resource.title), show_resource_path(resource)) -%>
      </p>
      
      <p style="font-size: 85%; margin-top: 0.3em;">
        <b>Uploaded by:</b> <%= link_to resource.asset.contributor.person.name, resource.asset.contributor.person -%>
      </p>
      
      <% author_list = resource.asset.authors %>
      <% unless author_list.empty? %>
        <p style="font-size: 85%; margin-top: 0.3em;">
          <b>Author<%= author_list.size > 1 ? "s" : "" -%>:</b> 
          <% author_list.each do |author| %>
          <%= (link_to author.name, author) + (author == author_list.last ? "" : ",") -%>
          <% end %>
        </p>
      <% end %>

      <p style="font-size: 85%; margin-top: 0.3em;">
        <b>Version:</b> <%= resource.version -%>
      </p>

      <p style="font-size:85%; margin-top: 0.3em; padding-top: 0;">
        <b>Associated project:</b> 
        <%= (resource.project ? link_to(h(resource.project.name), project_path(resource.project.id)) : "<span class='none_text'>None</span>" ) -%>
      </p>

      <p style="font-size:85%; margin-top: 0.3em; padding-top: 0;">
        <b>Organism:</b>
        <% if resource.organism -%>
          <%=organism_link_to resource.organism -%>
        <% else -%>
          <span class="none_text">Unknown</span>
        <% end -%>
      </p>

      <p style="font-size:85%; margin-top: 0.3em; padding-top: 0;">
        <b>Model type:</b> <%= model_type_text resource.model_type %>        
        <b>Model format:</b> <%= model_format_text resource.model_format %>
      </p>
      
      <p style="font-size:85%; margin-top: 0.3em; padding-top: 0;">
        <b>Environment:</b> <%= model_environment_text resource %>
      </p>

      <p style="font-size: 85%; margin-top: 0.4em;">
        <b>Created:</b> <%= resource.asset.created_at.strftime('%d/%m/%Y @ %H:%M:%S') -%>
        <% unless resource.asset.created_at == resource.asset.updated_at -%>          
          <b>Last updated:</b> <%= resource.asset.updated_at.strftime('%d/%m/%Y @ %H:%M:%S') -%>
        <% end %>
      </p>

      <div class="desc" style="font-size: 85%;">
        <% unless resource.description.blank? -%>
          <%= text_or_not_specified(resource.description, :description => true,:auto_link=>true, :length=>500) -%>
        <% else -%>
          <span class="none_text">No description</span>
        <% end -%>
      </div>
    </td>


    <td class="actions" style="width: 80px;">
      <%= render :partial=>"assets/resource_actions_td",:locals=>{:resource=>resource} %>
    </td>

  </tr>
</table>