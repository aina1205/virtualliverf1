
<%
   all_organisms = Organism.find(:all,:order=>:title)
   culture_growth_options=options_for_select(CultureGrowthType.find(:all,:order=>:title).collect{|cg| [cg.title,cg.id]}.insert(0,"Not specified"))
-%>
<h2><%= CELL_CULTURE_OR_SPECIMEN.capitalize%></h2>
        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Title:</label><span class="required">*</span>
          <%= text_field_tag "specimen[title]", nil, :style => 'float:right;margin-right:30em' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Lab internal identifier:</label><span class="required">*</span>
          <%= text_field_tag "specimen[lab_internal_number]", nil, :style => 'float:right;margin-right:30em' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;">Culture starting date:</label>
          <%= calendar_date_select_tag "specimen[born]", nil, :time => "mixed", :style => 'float:right;margin-right:30em' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Culture type:</label>
          <%= select_tag "specimen[culture_growth_type_id]",culture_growth_options, :style => 'float:right;width:13.5em;margin-right:30em' -%>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Provider ID:</label>
          <%= text_field_tag "specimen[provider_id]", nil, :style => 'float:right;margin-right:30em' %>
        </p>

        <p style="margin-bottom: 1.5em">
          <label style="float: left;"> Provider name:</label>
          <%= text_field_tag "specimen[provider_name]", nil, :style => 'float:right;margin-right:30em' %>
        </p>

        <br/>
        <br/>

        <span style="font-weight: bold;">Organism</span> <span class="required">*</span>
        <%= select_tag "organism_id",
            options_for_select([["Select Organism ...", 0]]|all_organisms.collect{|o| [truncate(h(o.title)), o.id]},try_block{strain.organism_id} || try_block{current_user.person.projects.first.organism_ids.first}),
            :onchange => "strains_of_selected_organism(this.value)"
        -%>
        <br/>
        <br/>
        <span style="font-weight: bold;">Strain</span>
        <%= select_tag "specimen[strain_id]",
                     options_for_select([["Select Strain ...", 0]])
        -%>

        <br/>
        <br/>

        <%= render :partial => "assets/author_form", :locals => {:resource_type => 'Specimen', # this is only for presentation, not for any processing
                                                               :existing_creators => [current_user.person],
                                                               :other_creators => nil
                                                               } -%>

        <%= fancy_multiselect Specimen.new(), :sops, :name => 'specimen_sop_ids',:association_class=>Sop %>


